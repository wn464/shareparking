<!doctype html>
<html lang="en">
<head>
	<title>主页！！！</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<link rel="stylesheet" href="assets/vendor/chartist/css/chartist-custom.css">
	<link rel="stylesheet" href="assets/css/main.css">
	<link rel="stylesheet" href="assets/css/demo.css">
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon.png">
</head>
<body>	
	<div id="newinfo">
	<div id="wrapper">
		<nav class="navbar navbar-default navbar-fixed-top" id="toping"></nav>
	<!--侧边栏-->
		<div id="sidebar-nav" class="sidebar">
			<div class="sidebar-scroll">
				<nav>
					<ul class="nav" >
						<li><a href="index.html" class="active"><i class="lnr lnr-home"></i> <span>共享车位主页</span></a></li>
						<li v-if="shabi==2"><a href="log.html" class=""><i class="lnr lnr-file-empty"></i> <span>日志管理</span></a></li>
						
						<li><a href="order.html" class=""><i class="lnr lnr-map"></i> <span>订单中心</span></a></li>
						<li><a href="car.html" class=""><i class="lnr lnr-map-marker"></i> <span>车位信息</span></a></li>
						<li><a href="member.html" class=""><i class="lnr lnr-users"></i> <span>用户管理</span></a></li>
						<li><a href="message.html" class=""><i class="lnr lnr-bookmark"></i> <span>用户车位审核</span></a></li>
						<li><a href="money.html" class=""><i class="lnr lnr-linearicons"></i> <span>财务统计</span></a></li>
						<li><a href="complain.html" class=""><i class="lnr lnr-chart-bars"></i> <span>投诉管理</span></a></li>
						<li><a href="user-change.html" class=""><i class="lnr lnr-user"></i> <span>个人信息管理</span></a></li>
						<li v-if="shabi==2"><a href="authority.html" class=""><i class="lnr lnr-cog" ></i><span>操作权限管理</span></a></li>
					</ul>
				</nav>
			</div>
		</div>
		<div class="main">
			<div class="main-content">
				<div class="container-fluid">
					<div class="panel panel-headline">
						<div class="panel-heading">
							<p class="panel-subtitle">&nbsp;</p>
							<h3 class="panel-title">&nbsp;&nbsp;今日信息</h3>
						</div>
						<div class="panel-body" >
							<div class="row">
								<div class="col-md-3">
									<div class="metric" onclick="location.href='http://myzuul.com:8080/park/order.html#';"  style="cursor:pointer">
										<span class="icon" style="background-color: #dbd292"><i class="fa fa-eject" ></i></span>
										<p>
											<span class="number">{{order}}</span>
											<span class="title">今日日新增订单</span>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon" style="background-color: #27727b"><i class="fa fa-navicon"></i></span>
										<p>
											<a class="number" href="car.html">{{carportnumber}}</a>
											<a class="title" href="car.html">今日新增车位</a>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon"  style="background-color: #fe8463"><i class="fa fa-archive"></i></span>
										<p>
											<a class="number" href="complain.html">{{complaintnumber}}</a>
											<a class="title" href="complain.html">今日新增投诉</a>
										</p>
									</div>
								</div>
								<div class="col-md-3">
									<div class="metric">
										<span class="icon" style="background-color: #a4c879"><i class="fa fa-user"></i></span>
										<p>
											<span class="number">10000</span>
											<span class="title">总计用户数</span>
										</p>
									</div>
								</div>
							</div>
							
						</div>
					</div>
					<!-- END OVERVIEW -->
					<div class="row">
						<div class="col-md-12">
							<!-- MULTI CHARTS -->
							<div class="panel">
								<div class="panel-heading">
									<h3 class="panel-title">本年度营业额</h3>
									<div class="right">
										<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
										<button type="button" class="btn-remove"><i class="lnr lnr-cross"></i></button>
									</div>
								</div>
								<div class="panel-body">
									<div id="container" style="width:1600px;height:470px;"></div>
								</div>
							</div>
							<!-- END MULTI CHARTS -->
						</div>
					</div>

				</div>
			</div>
		</div>
		<div class="clearfix"></div>
		<footer>
			<div class="container-fluid">
				<p class="copyright">Copyright &copy; 2017.Company name All rights reserved.More Templates  - Collect from </p>
			</div>
		</footer>
	</div>
	</div>
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/vendor/jquery.easy-pie-chart/jquery.easypiechart.min.js"></script>
	<script src="assets/vendor/chartist/js/chartist.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
	<script type="text/javascript" src="assets/js/echarts.min.js" ></script>
	<script src="assets/js/vue.js" type="text/javascript" charset="utf-8"></script>
	<script src="assets/js/axios.min.js" type="text/javascript" charset="utf-8"></script>
	<script>
	/*加载公共页面*/
	$(function(){
		$("#toping").load("top.html");
	})

	var date = new Date();
			var year = date.getFullYear(); 	//获取年 
			var month = date.getMonth()+1;	//获取月  
			var day = date.getDate(); 		//获取当日
			var time = year+"-0"+month+"-"+day; //组合时间  
	var vm = new Vue({
				el:"#newinfo",
				data:{
					order:[],
					shabi:{},
					carportnumber:{},
					complaintnumber:{}
	
				},
				created(){
					/* 直接发送请求  查询今日的订单 */
					axios.get("http://myzuul.com:9500/orders/order/dayNumber/"+time)
					.then(res=>{
						console.info(res.data)
						this.order=res.data
					}),
					axios.post("http://myzuul.com:9500/user/user/username").then(res=>{
						this.shabi=res.data.authority.id;
						console.info(this.shabi)
					}),
					axios.get("http://myzuul.com:9500/port/carport/time/1/100")
					.then(res=>{
						console.info(res.data)
						this.carportnumber=res.data.totalNumber
					}),
					axios.get("http://myzuul.com:9500/complaint/complaint/"+getNowFormatDate()+"/"+getTomFormatDate())
					.then(res=>{
						console.info(res.data)
						this.complaintnumber=res.data
					})
				}
				
				
			})
		
	//根据月份段查询收入
	function tab() {
	$.ajax({
		url:"http://myzuul.com:9500/orders/order/money/2019/1/12",
		type:"get",
		success:function(mes){
			console.info(mes)
			var a = mes.times[0]
			var	b = mes.times[1]
			var	c = mes.times[2]
			var	d = mes.times[3]
			var	e = mes.times[4]
			var f = mes.times[5]
			var g = mes.times[6]
			var h = mes.times[7]
			var i = mes.times[8]
			var j = mes.times[9]
			var k = mes.times[10]
			var l = mes.times[11]
			var a1 = mes.double1[0]
			var	b1 = mes.double1[1]
			var	c1 = mes.double1[2]
			var	d1 = mes.double1[3]
			var	e1 = mes.double1[4]
			var f1 = mes.double1[5]
			var g1 = mes.double1[6]
			var h1 = mes.double1[7]
			var i1 = mes.double1[8]
			var j1 = mes.double1[9]
			var k1 = mes.double1[10]
			var l1 = mes.double1[11]
			
			var dom = document.getElementById("container");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			app.title = '折柱混合';
			
			option = {
			    tooltip: {
			        trigger: 'axis',
			        axisPointer: {
			            type: 'cross',
			            crossStyle: {
			                color: '#999'
			            }
			        }
			    },
		    toolbox: {
		        feature: {
		            dataView: {show: true, readOnly: false},
		            magicType: {show: true, type: ['line', 'bar']},
		            restore: {show: true},
		            saveAsImage: {show: true}
		        }
		    },
		    legend: {
		      
		    },
		    xAxis: [
		        {
		            type: 'category',
		            data: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'],
		            axisPointer: {
		                type: 'shadow'
		            }
		        }
		    ],
		    yAxis: [
		        {
		            type: 'value',
		            name: '营业额',
		            min: 0,

		            axisLabel: {
		                formatter: '{value} 元'
		            }
		        },
		        {
		            type: 'value',
		            name: '下单次数',
		            min: 0,

		            axisLabel: {
		                formatter: '{value} '
		            }
		        }
		    ],
		    series: [
		       
		        {
		            name:'营业额',
		            type:'bar',
		            data:[a1*0.05, b1*0.05, c1*0.05, d1*0.05, e1*0.05, f1*0.05, g1*0.05, h1*0.05, i1*0.05, j1*0.05, k1*0.05, l1*0.05],
		            itemStyle: {   
		                //通常情况下：
		                normal:{  
		　　　　　　　　　　　　//每个柱子的颜色即为colorList数组里的每一项，如果柱子数目多于colorList的长度，则柱子颜色循环使用该数组
		                    color: function (params){
		                        var colorList = [ '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
		                               '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
		                               '#D7504B','#C6E579'];
		                        return colorList[params.dataIndex];
		                    }
		                },
		                //鼠标悬停时：
		                emphasis: {
		                        shadowBlur: 10,
		                        shadowOffsetX: 0,
		                        shadowColor: 'rgba(0, 0, 0, 0.5)'
		                }
		            },
		       		
		        },
		        {
		            name:'下单次数',
		            type:'line',
		            yAxisIndex: 1,
		            data:[a, b, c, d, e, f, g, h, i, j, k, l],
		            itemStyle: {   
		                //通常情况下：
		                normal:{  
		　　　　　　　　　　　　//每个柱子的颜色即为colorList数组里的每一项，如果柱子数目多于colorList的长度，则柱子颜色循环使用该数组
		                    color: function (params){
		                        var colorList = [ '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
		                               '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
		                               '#D7504B','#C6E579'];
		                        return colorList[params.dataIndex];
		                    },
		                    lineStyle:{
								color:'#0081c2'
							}

		                },
		                //鼠标悬停时：
		                emphasis: {
		                        shadowBlur: 10,
		                        shadowOffsetX: 0,
		                        shadowColor: 'rgba(0, 0, 0, 0.5)'
		                }
		            },
		        }
		    ]};
			if (option && typeof option === "object") {
			    myChart.setOption(option, true);
			}
		}
	})
	}
	tab();
	 //获取当前时间
	 function getNowFormatDate() {
	      var date = new Date();
	      var seperator1 = "-";
	      var year = date.getFullYear();
	      var month = date.getMonth() + 1;
	      var strDate = date.getDate();
	      if (month >= 1 && month <= 9) {
	          month = "0" + month;
	      }
	      if (strDate >= 0 && strDate <= 9) {
	          strDate = "0" + strDate;
	      }
	      var currentdate = year + seperator1 + month + seperator1 + strDate;
	      return currentdate;
	  }
	//获取明日时间
	 function getTomFormatDate() {
	      var date = new Date();
	      var seperator1 = "-";
	      var year = date.getFullYear();
	      var month = date.getMonth() + 1;
	      var strDate = date.getDate()+1;
	      if (month >= 1 && month <= 9) {
	          month = "0" + month;
	      }
	      if (strDate >= 0 && strDate <= 9) {
	          strDate = "0" + strDate;
	      }
	      var currentdate = year + seperator1 + month + seperator1 + strDate;
	      return currentdate;
	  }
	</script>
	
</body>
</html>